{"ast":null,"code":"var _jsxFileName = \"C:\\\\PwC Assignment\\\\pwcassignment\\\\src\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport axios from 'axios';\nimport \"./map.css\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1IjoiemFpZGgiLCJhIjoiY2xjZDZwOThyMGF3aTN3cHU5bjhvNmgweiJ9.uoMkvDXyEXWsyDGDFrbgWQ';\nlet timer;\nexport default function Map() {\n  _s();\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [longitude, setLongitude] = useState(0);\n  const [latitude, setLatitude] = useState(0);\n  const [zoom, setZoom] = useState(4);\n  const [noResult, setNoResult] = useState('');\n  useEffect(() => {\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/satellite-streets-v12',\n      center: [longitude, latitude],\n      zoom: zoom\n    });\n  }, [longitude, latitude, zoom]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [city, setCity] = useState('');\n  const [cityChosen, setCityChosen] = useState('');\n  const [suggestions, setSuggestions] = useState([]);\n  const [isOnChange, setIsOnChange] = useState(false);\n  useEffect(() => {\n    function handleSearch() {\n      clearTimeout(timer);\n      if (city.length === 0) {\n        setSuggestions([]);\n        return;\n      }\n      ;\n      timer = setTimeout(async () => {\n        setIsLoading(true);\n        try {\n          const response = await axios.get(`https://api.locationiq.com/v1/autocomplete?key=pk.f0e243e14c2eef45faade1ad57332fb2&q=${city}`);\n          var suggestions = response.data;\n          setSuggestions(suggestions);\n          setNoResult(\"\");\n          console.log(\"requested\");\n          setIsLoading(false);\n        } catch (e) {\n          console.log(e.message);\n          setNoResult(\"No Result\");\n          setIsLoading(false);\n        }\n      }, 600);\n    }\n    handleSearch();\n  }, [city]);\n  function handleSuggestionClick(suggestion) {\n    setCityChosen(suggestion.display_name);\n    setLongitude(suggestion.lon);\n    setLatitude(suggestion.lat);\n    setZoom(15);\n    setSuggestions([]);\n  }\n  function onClickSearch(event) {\n    event.preventDefault();\n    clearTimeout(timer);\n    if (cityChosen.length === 0) {\n      setSuggestions([]);\n      return;\n    }\n    ;\n    timer = setTimeout(async () => {\n      setIsLoading(true);\n      try {\n        const response = await axios.get(`https://api.locationiq.com/v1/autocomplete?key=pk.f0e243e14c2eef45faade1ad57332fb2&q=${cityChosen}`);\n        var suggestions = response.data;\n        setSuggestions(suggestions);\n        setNoResult(\"\");\n        console.log(\"requested\");\n        setIsLoading(false);\n      } catch (e) {\n        console.log(e.message);\n        setNoResult(\"No Result\");\n        setIsLoading(false);\n      }\n    }, 600);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: mapContainer,\n        className: \"map-container\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: isOnChange ? e => e.preventDefault() : onClickSearch,\n        className: \"formField\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"city\",\n          className: \"inputField\",\n          id: \"city\",\n          name: \"city\",\n          value: cityChosen,\n          onChange: e => {\n            isOnChange && setCity(e.target.value);\n            setCityChosen(e.target.value);\n          },\n          placeholder: \"Enter a City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), suggestions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"suggestionList\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: noResult ? /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"\",\n            children: noResult\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 27\n          }, this) : suggestions.map(suggestion => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleSuggestionClick(suggestion),\n            children: suggestion.display_name\n          }, suggestion.osm_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this) : isLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      checked: isOnChange,\n      onClick: () => setIsOnChange(!isOnChange)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"On input or on submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Map, \"uge3XYZISfHnrkIa9Yhl1toE1r4=\");\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useRef","useEffect","useState","mapboxgl","axios","accessToken","timer","Map","mapContainer","map","longitude","setLongitude","latitude","setLatitude","zoom","setZoom","noResult","setNoResult","current","container","style","center","isLoading","setIsLoading","city","setCity","cityChosen","setCityChosen","suggestions","setSuggestions","isOnChange","setIsOnChange","handleSearch","clearTimeout","length","setTimeout","response","get","data","console","log","e","message","handleSuggestionClick","suggestion","display_name","lon","lat","onClickSearch","event","preventDefault","target","value","osm_id"],"sources":["C:/PwC Assignment/pwcassignment/src/Map.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\r\nimport axios from 'axios';\r\nimport \"./map.css\"\r\n\r\nmapboxgl.accessToken = 'pk.eyJ1IjoiemFpZGgiLCJhIjoiY2xjZDZwOThyMGF3aTN3cHU5bjhvNmgweiJ9.uoMkvDXyEXWsyDGDFrbgWQ';\r\nlet timer;\r\n\r\nexport default function Map() {\r\n\r\n  const mapContainer = useRef(null);\r\n  const map = useRef(null);\r\n  const [longitude, setLongitude] = useState(0);\r\n  const [latitude, setLatitude] = useState(0);\r\n  const [zoom, setZoom] = useState(4);\r\n  const [noResult, setNoResult] = useState('')\r\n\r\n  useEffect(() => {\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: 'mapbox://styles/mapbox/satellite-streets-v12',\r\n      center: [longitude, latitude],\r\n      zoom: zoom\r\n    });\r\n  }, [longitude, latitude, zoom]);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [city, setCity] = useState('');\r\n  const [cityChosen, setCityChosen] = useState('');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [isOnChange, setIsOnChange] = useState(false);\r\n  useEffect(() => {\r\n    function handleSearch() {\r\n      clearTimeout(timer);\r\n      if (city.length === 0) {\r\n        setSuggestions([]);\r\n        return;\r\n      };\r\n      timer = setTimeout(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n          const response = await axios.get(`https://api.locationiq.com/v1/autocomplete?key=pk.f0e243e14c2eef45faade1ad57332fb2&q=${city}`);\r\n          var suggestions = response.data;\r\n          setSuggestions(suggestions);\r\n          setNoResult(\"\")\r\n          console.log(\"requested\")\r\n          setIsLoading(false);\r\n\r\n        }\r\n        catch (e) {\r\n          console.log(e.message)\r\n          setNoResult(\"No Result\")\r\n          setIsLoading(false);\r\n\r\n        }\r\n\r\n      }\r\n        , 600);\r\n\r\n    }\r\n    handleSearch();\r\n\r\n  }\r\n    , [city])\r\n\r\n\r\n  function handleSuggestionClick(suggestion) {\r\n    setCityChosen(suggestion.display_name)\r\n    setLongitude(suggestion.lon);\r\n    setLatitude(suggestion.lat);\r\n    setZoom(15);\r\n    setSuggestions([]);\r\n\r\n  }\r\n  function onClickSearch(event) {\r\n    event.preventDefault();\r\n\r\n    clearTimeout(timer);\r\n    if (cityChosen.length === 0) {\r\n      setSuggestions([]);\r\n      return;\r\n    };\r\n    timer = setTimeout(async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const response = await axios.get(`https://api.locationiq.com/v1/autocomplete?key=pk.f0e243e14c2eef45faade1ad57332fb2&q=${cityChosen}`);\r\n        var suggestions = response.data;\r\n        setSuggestions(suggestions);\r\n        setNoResult(\"\")\r\n        console.log(\"requested\")\r\n        setIsLoading(false);\r\n\r\n      }\r\n      catch (e) {\r\n        console.log(e.message)\r\n        setNoResult(\"No Result\")\r\n        setIsLoading(false);\r\n\r\n      }\r\n\r\n    }\r\n      , 600);\r\n\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"mainContainer\">\r\n        <div ref={mapContainer} className=\"map-container\" />\r\n        <form onSubmit={isOnChange ? (e) => e.preventDefault() : onClickSearch} className=\"formField\">\r\n          <input type=\"city\" className=\"inputField\" id=\"city\" name=\"city\" value={cityChosen} onChange={e => { (isOnChange && setCity(e.target.value)); setCityChosen(e.target.value) }} placeholder=\"Enter a City\" />\r\n\r\n          <button type=\"submit\">Search</button>\r\n        </form>\r\n        {suggestions.length > 0 ? (\r\n          <div className=\"suggestionList\">\r\n            <ul>\r\n              {noResult ? <li className=\"\">{noResult}</li> : suggestions.map(suggestion => (\r\n                <li key={suggestion.osm_id} onClick={() => handleSuggestionClick(suggestion)}>\r\n                  {suggestion.display_name}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        ) : isLoading ? <span className=\"loader\"></span> : <></>}\r\n\r\n      </div>\r\n      <input type=\"checkbox\" checked={isOnChange} onClick={() => setIsOnChange(!isOnChange)}></input>\r\n      <label>On input or on submit</label>\r\n\r\n    </>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}